'use strict'

var fs = require('fs');


module.exports.log = function(msg,timestamp,file,sync){
	sync = sync === undefined ? false : sync;
	file = file === undefined ? process.cwd() + "/node.info.log" : file;
	timestamp = timestamp == undefined ? true : timestamp;
	if (timestamp) {
		msg = (new Date).toUTCString() + ": " + msg;
	}
	msg += "/n";
	try {
		if (sync) {
			fs.appendFileSync(file,msg);
		} else {
			fs.appendFile(file,msg,function(err){
				if (err) {
					console.error((new Date).toUTCString() + ' pid('+process.pid+') logger error: ' + err);
				}
			});
		}
	} catch (e) {
		console.error((new Date).toUTCString() + ' pid('+process.pid+') logger error: ' + e);
	}
}
